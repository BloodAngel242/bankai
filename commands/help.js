const settings = require('../settings');
const fs = require('fs');
const path = require('path');

async function helpCommand(sock, chatId, message) {
const tsh = {
    key: {
        fromMe: false,
        participant: `0@s.whatsapp.net`,
        ...(message.chat ? { remoteJid: "status@broadcast" } : {})
    },
    message: {
        contactMessage: {
            displayName: 'ğŸŒ¹ğ—ğ—¨ğ—¥ğ—”ğ— ğ—” ğ— ğ——ğŸŒ¹',
            vcard: `BEGIN:VCARD\nVERSION:3.0\nN:;META AI;;;\nFN:META AI\nitem1.TEL;waid=242066191337:242066191337\nitem1.X-ABLabel:Mobile\nitem2.EMAIL;type=INTERNET:info@meta.com\nitem2.X-ABLabel:Email\nitem3.URL:https://orax-tsh.netlify.app/\nitem3.X-ABLabel:Domaine\nEND:VCARD`
        }
    }
}
    const helpMessage = `
*â•­â”€â”€â”€â”€â”€â”€â”€ Â·ğ‘Â· â”€â”€â”€â”€â”€â”€â”€ Â· Â·*
*â”Šâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*
*â”Šâ”‚â”€â”€â”€â”€â”€â”€â™¢*
*â”Šâ”‚ğŸ’€ï¸±á´„Ê€á´‡á´€á´›á´Ê€ : \`á´€ÊŸá´˜Êœá´€ Ê™ÊŸá´á´á´… á´€É´É¢á´‡ÊŸ\`*
*â”Šâ”‚ğŸ’€ï¸±Ê™á´á´› : á´‹á´œÊ€á´€á´á´€ á´á´… á´ 2*
*â”Šâ”‚ğŸ’€ï¸±á´ á´‡Ê€sÉªá´É´ : 1.2.0*
*â”Šâ”‚ğŸ’€ï¸±á´˜Ê€á´‡Ò“Éªx : "."*
*â”‚â”Šâ”€â”€â”€â”€â”€â”€â™¢*
*â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*
*â•­â”€â”€â”€ã€” ğŠğ”ğ‘ğ€ğŒğ€ ğŒğƒ ğğğ“ ã€•â”€â”€â”€â•®*
*â”‚âœªâ”â”â™°*
*â”‚âœªâ•â”€â”€ã€” ğ†ğ‘ğğ”ğğ„-ğŒğ„ğğ” ã€•â”€â”€*
*â”‚âœªâ•ğŸŒ¹â†’á´˜Ê€á´á´á´á´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´…á´‡á´á´á´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´˜á´œÊ€É¢á´‡ [ á´‹Éªá´„á´‹á´€ÊŸÊŸ ]*
*â”‚âœªâ•ğŸŒ¹â†’á´˜á´œÊ€É¢á´‡2 [ á´É´á´‡sÊœá´á´› ]*
*â”‚âœªâ•ğŸŒ¹â†’á´€É´á´›ÉªÊŸÉªÉ´á´‹*
*â”‚âœªâ•ğŸŒ¹â†’á´á´œá´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´œÉ´á´á´œá´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´›á´€É¢á´€ÊŸÊŸ*
*â”‚âœªâ•ğŸŒ¹â†’á´¡á´‡ÊŸá´„á´á´á´‡ á´É´ - á´Ò“Ò“*
*â”‚âœªâ•ğŸŒ¹â†’á´…á´‡ÊŸá´‡á´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´„ÊŸá´‡á´€Ê€*
*â”‚âœªâ•ğŸŒ¹â†’á´€É´á´›Éªá´…á´‡ÊŸá´‡á´›á´‡ á´É´ - á´Ò“Ò“*
*â”‚âœªâ•ğŸŒ¹â†’Ê€á´‡á´˜á´ - sá´„ - É¢Éªá´›*
*â”‚âœªâ•ğŸŒ¹â†’á´˜Ê€á´á´á´á´›á´‡á´€ÊŸÊŸ*
*â”‚âœªâ•ğŸŒ¹â†’sá´‡á´›á´˜á´˜*
*â”‚âœªâ•ğŸŒ¹â†’É¢Ê€á´á´œá´˜ÉªÉ´Ò“á´*
*â”‚âœªâ•ğŸŒ¹â†’É¢á´á´á´…Ê™Êá´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´€É´á´›Éªá´›á´€É¢ á´É´ - á´Ò“Ò“*
*â”‚âœªâ•â”€â”€ã€” ğ€ğˆ ğ± ğˆğŒğ€ğ†ğ„-ğŒğ„ğğ” ã€•â”€â”€*
*â”‚âœªâ•ğŸŒ¹â†’É¢á´˜á´›*
*â”‚âœªâ•ğŸŒ¹â†’Éªá´á´€É¢ÉªÉ´á´‡*
*â”‚âœªâ•ğŸŒ¹â†’É¢á´‡á´ÉªÉ´Éª*
*â”‚âœªâ•ğŸŒ¹â†’Ò“ÊŸá´œx*
*â”‚âœªâ•ğŸŒ¹â†’sá´Ê€á´€*
*â”‚âœªâ•ğŸŒ¹â†’á´„á´á´á´˜ÊŸÉªá´á´‡É´á´›*
*â”‚âœªâ•ğŸŒ¹â†’ÉªÉ´sá´œÊŸá´›*
*â”‚âœªâ•ğŸŒ¹â†’Ò“ÊŸÉªÊ€á´›*
*â”‚âœªâ•â”€â”€ã€” ğğ–ğ-ğŒğ„ğğ” ã€•â”€â”€*
*â”‚âœªâ•ğŸŒ¹â†’á´á´‡É´á´œ*
*â”‚âœªâ•ğŸŒ¹â†’Êœá´‡ÊŸá´˜*
*â”‚âœªâ•ğŸŒ¹â†’á´‹á´œÊ€á´€á´á´€*
*â”‚âœªâ•ğŸŒ¹â†’á´˜ÉªÉ´É¢*
*â”‚âœªâ•ğŸŒ¹â†’á´ á´ *
*â”‚âœªâ•ğŸŒ¹â†’á´€á´œá´›á´Ê€á´‡á´€á´„á´› á´É´/á´Ò“Ò“*
*â”‚âœªâ•ğŸŒ¹â†’ÊŸÊÊ€Éªá´„s*
*â”‚âœªâ•ğŸŒ¹â†’á´á´á´…á´‡ á´˜á´œÊ™ÊŸÉªá´„ - á´˜Ê€Éªá´ á´€á´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’á´€á´œá´›á´á´›Êá´˜ÉªÉ´É¢ á´É´ - á´Ò“Ò“*
*â”‚âœªâ•ğŸŒ¹â†’á´€á´œá´›á´Ê€á´‡á´€á´… á´É´ - á´Ò“Ò“*
*â”‚âœªâ•ğŸŒ¹â†’sá´œá´…á´*
*â”‚âœªâ•ğŸŒ¹â†’á´›á´á´œÊ€ÊŸ - á´œÊ€ÊŸ*
*â”‚âœªâ•ğŸŒ¹â†’á´œá´˜á´…á´€á´›á´‡*
*â”‚âœªâ•ğŸŒ¹â†’sá´‡á´›á´›ÉªÉ´É¢s*
*â”‚âœªâ•ğŸŒ¹â†’á´˜á´Ê™ÊŸá´á´„á´‹á´‡Ê€*
*â”‚âœªâ•ğŸŒ¹â†’á´€ÊŸÉªá´ á´‡*
*â”‚âœªâ•â”€â”€ã€” ğ’ğ“ğˆğ‚ğŠğ„ğ‘ğ’-ğŒğ„ğğ” ã€•â”€â”€*
*â”‚âœªâ•ğŸŒ¹â†’sá´›Éªá´„á´‹á´‡Ê€*
*â”‚âœªâ•ğŸŒ¹â†’á´›á´€á´‹á´‡ <á´˜á´€á´„á´‹ É´á´€á´á´‡>*
*â”‚âœªâ•ğŸŒ¹â†’á´‡á´á´á´ŠÉªá´Éªx ğŸ˜‚+ğŸ˜­*
*â”‚âœªâ•ğŸŒ¹â†’ÉªÉ¢s*
*â”‚âœªâ•ğŸŒ¹â†’ÉªÉ¢sá´„*
*â”‚âœªâ•ğŸŒ¹â†’Ê€á´‡á´á´á´ á´‡Ê™É¢*
*â”‚âœªâ•ğŸŒ¹â†’s*
*â”‚âœªâ•ğŸŒ¹â†’sÉªá´á´€É¢á´‡*
*â”‚âœªâ•â”€â”€ã€” ğƒğğ–ğ-ğŒğ„ğğ” ã€•â”€â”€*
*â”‚âœªâ•ğŸŒ¹â†’á´˜ÊŸá´€Ê - sá´É´É¢*
*â”‚âœªâ•ğŸŒ¹â†’á´ Éªá´…á´‡á´*
*â”‚âœªâ•ğŸŒ¹â†’sá´˜á´á´›ÉªÒ“Ê*
*â”‚âœªâ•ğŸŒ¹â†’ÉªÉ´sá´›á´€É¢Ê€á´€á´*
*â”‚âœªâ•ğŸŒ¹â†’Ò“á´€á´„á´‡Ê™á´á´á´‹*
*â”‚âœªâ•ğŸŒ¹â†’á´›Éªá´‹á´›á´á´‹*
*â”‚âœªâ•ğŸŒ¹â†’á´›á´‡ÊŸá´‡sá´›Éªá´„á´‹ <ÊŸÉªÉ´á´‹ á´›É¢ á´˜á´€á´„á´‹>*
*â”‚âœªâ”—â”â™°*
*â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯*
> *Â©á´˜á´á´¡á´‡Ê€á´‡á´… Ê™Ê á´Ê€ Ê™ÊŸá´á´á´… á´€É´É¢á´‡ÊŸ* :`;

    try {
        const imagePath = path.join(__dirname, '../assets/bot_image.jpg');
        
        if (fs.existsSync(imagePath)) {
            const imageBuffer = fs.readFileSync(imagePath);
            
            await sock.sendMessage(chatId, {
                image: imageBuffer,
                caption: helpMessage,
                contextInfo: {
                    forwardingScore: 1,
                    isForwarded: true,
                    forwardedNewsletterMessageInfo: {
                        newsletterJid: '120363408210681586@newsletter',
                        newsletterName: 'ğŠğ”ğ‘ğ€ğŒğ€-ğŒğƒ_ğ•ğŸ ğŸŒ¹',
                        serverMessageId: -1
                    }
                }
            },{ quoted: tsh });
        } else {
            console.error('Bot image not found at:', imagePath);
            await sock.sendMessage(chatId, { 
                text: helpMessage,
                contextInfo: {
                    forwardingScore: 1,
                    isForwarded: true,
                    forwardedNewsletterMessageInfo: {
                        newsletterJid: '120363408210681586@newsletter',
                        newsletterName: 'ğŠğ”ğ‘ğ€ğŒğ€-ğŒğƒ_ğ•ğŸ',
                        serverMessageId: -1
                    } 
                }
            });
        }
    } catch (error) {
        console.error('Error in help command:', error);
        await sock.sendMessage(chatId, { text: helpMessage });
    }
}

module.exports = helpCommand;